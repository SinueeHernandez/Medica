@{
    Layout = null;
}
@model Medica.Consulta

@{
            ViewBag.Title = "Programar Consulta";
}
<!DOCTYPE html>
<html>

<head>
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body style="margin:10px">
    <form id="f" method="post" action="@Url.Action("CreateDated")" class="form-horizontal" >
            @Html.AntiForgeryToken()

        <fieldset>
            <legend>@ViewBag.Title</legend>
            
            
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @Html.LabelFor(model => model.MedicoId, "Medico", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.DropDownList("MedicoId", null, htmlAttributes: new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.MedicoId, "", new { @class = "text-danger" })
                </div>

            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.PacienteId, "Paciente", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-3">
                    @Html.DropDownList("PacienteId", null, htmlAttributes: new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.PacienteId, "", new { @class = "text-danger" })
                </div>
                <div class="col-md-3">
                    <a class="button" href="@Url.Content("~/Pacientes/Create")" id="pacienteAddLink">Agregar paceinte</a>
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Fecha, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Fecha, new { htmlAttributes = new { @class="form-control date-time-picker"}
                    })
                    @Html.ValidationMessageFor(model => model.Fecha, "", new { @class = "text-danger" })

                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.FechaFin, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.FechaFin, new { htmlAttributes = new { @class = "form-control date-time-picker" } })
                    @Html.ValidationMessageFor(model => model.FechaFin, "", new { @class = "text-danger" })

                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Sintomas, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Sintomas, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Sintomas, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Create" class="btn btn-success" />
                </div>
            </div>
            </fieldset>


</form>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/bootstrap")
    <script type="text/javascript">

                function close(result) {
                    if (parent && parent.DayPilot && parent.DayPilot.ModalStatic) {
                        parent.DayPilot.ModalStatic.close(result);
                    }
                }

                $("#f").submit(function () {
                    var f = $("#f");
                    $.post(f.action, f.serialize(), function (result) {
                        close(eval(result));
                    });
                    return false;
                });

                $(document).ready(function () {
                    $("#Text").focus();
                });

    </script>
</body>
</html>